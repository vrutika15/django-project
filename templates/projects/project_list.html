{% load static %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<div class="container mt-5">
  <h2>Projects</h2>
  <a href="{% url 'projects:project_create' %}" class="btn btn-primary mb-3">
    <i class="fas fa-plus"></i> New Project
  </a>

  <table class="table table-bordered table-hover">
    <thead class="table-dark">
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Year</th>
        <th>Month</th>
        <th>Resources</th>
        <th>Present Days</th>
        <th>Billable Days</th>
        <th>Non-Billable Days</th>
        <th>Billable Hours</th>
        <th>Non-Billable Hours</th>
        <th>Total Hours</th>
        <th>Utilization %</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for project in projects %}
      <tr>
        <td>{{ project.project_name }}</td>
        <td>{{ project.get_project_type_display }}</td>
        <td>{{ project.year }}</td>
        <td>{{ project.get_month_display }}</td>
        <td>
          {% for resource in project.resources.all %}
          {{ resource.resource_name }}{% if not forloop.last %}, {% endif %}
          {% endfor %}
        </td>
        <td>{{ project.present_day }}</td>
        <td>{{ project.billable_days }}</td>
        <td>{{ project.non_billable_days }}</td>
        <td>{{ project.billable_hours }}</td>
        <td>{{ project.non_billable_hours }}</td>
        <td>{{ project.total_hours }}</td>
        <td>{{ project.utilization_percentage|floatformat:2 }}%</td>
        <td>
          <div class="btn-group" role="group">
            <a href="{% url 'projects:project_edit' project.pk %}" class="btn btn-sm btn-warning me-2">
              <i class="fas fa-edit"></i>
            </a>
            <a href="{% url 'projects:project_delete' project.pk %}" class="btn btn-sm btn-danger">
              <i class="fas fa-trash-alt"></i>
            </a>

          </div>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="13">No projects available.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>